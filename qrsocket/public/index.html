<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="style.css" >
    <title>qrsocket</title>
    <script defer type="module">
      import { client } from "./clientio.mjs"
      const urlParams = new URLSearchParams(window.location.search)
      const myParam = urlParams.get('jwt')
  
      const button = document.getElementById('connect')
      const input = document.getElementById('jwt')
      input.value = myParam
      
      button.onclick = () => {
        const jwt = input.value
        console.log(`jwt=${jwt}`)

        const ws = client(`ws://localhost:8081/${jwt}`)

        //{"id":2,"type":"valet-parking","progress":2,"qr":"1@ZnNtkz5vC/IqsEi3oydVRMd0O/j76zay6Xwyc+uZF0Fs4lyObXLcO4HlfFXqx6pbac4BT9evslFLmA==,DVZPQAir/qHRcxv6mO8BtoN7KTPT1aH4z0OLQHHRaFA=,qrkbWwmIM3fuGyvQrJLZxA=="}
        ws.onmessage = console.dir
        window.ws = ws
      }
    </script>
  </head>
  <body>
    <h1>QRCODE OF BROODER HEN</h1>
    <input id="jwt" type="text" placeholder="jwt"/>
    <br/>
    <button id="connect" type="button" >connect</button>
  </body>
</html>